<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cloud Simulator</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.2/cerulean/bootstrap.min.css"> -->
    <link type="text/css" rel="stylesheet" href="https://code.jquery.com/ui/1.11.3/themes/cupertino/jquery-ui.css">
    <link type="text/css" rel="stylesheet" href="cloud.css">
  </head>
  <body>
    <nav class="navbar navbar-default" style="border-radius: 0px;">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Cloud Simulator</a>
        </div>
        <div class="collapse navbar-collapse" id="navbar">
          <ul id="mode-selector" class="nav navbar-nav">
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a id="btn-replay-intro" href="#">Replay intro</a></li>
            <li><a id="btn-about" href="#">About</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container -->
    </nav>

    <div class="container">
      <div class="row">

        <div class="col-xs-4">

          <div class="panel panel-primary">
            <div class="panel-heading">
              <h2 class="panel-title panel-title-icon"><span class="glyphicon glyphicon-user" aria-hidden="true"></span></h2>
            </div>
            <ul class="list-group">
              <li class="list-group-item" id="response-section">
                <h3>Average response time</h3>
              </li>
              <li class="list-group-item" id="demand-section">
                <h3>Demand</h3>
            </ul>
          </div>

        </div>

        <div class="col-xs-4">

          <div class="panel panel-primary">
            <div class="panel-heading">
              <h2 class="panel-title">Total cost</h2>
            </div>
            <ul class="list-group">
              <li class="list-group-item">
                <table class="total-cost-table">
                  <tbody>
                    <tr>
                      <td class="total-cost-cell-img"><img id="total-cost-money-img" class="slider-img" src="money.png" alt="money" title="Total cost in £"></td>
                      <td class="total-cost-cell-text">£<span id="total-cost-money">0</span></td>
                      <td class="total-cost-cell-img total-cost-cell-bottom"><img id="total-cost-energy-img" class="slider-img" src="power.png" alt="energy" title="Total energy usage in J"></td>
                      <td class="total-cost-cell-text total-cost-cell-bottom"><span id="total-cost-energy">0</span> J</td>
                    </tr>
                  </tbody>
                </table>
                <button id="reset-cost-button" class="btn btn-block btn-default">Reset</button>
              </li>
            </ul>
          </div>

          <div class="network-main">
          </div>

        </div>

        <div class="col-xs-4">

          <div class="panel panel-primary">
            <div class="panel-heading">
              <h2 class="panel-title panel-title-icon"><span class="glyphicon glyphicon-cloud" aria-hidden="true"></span></h2>
            </div>
            <ul class="list-group">
              <li class="list-group-item" id="load-section">
                <h3>Load</h3>
              </li>
              <li class="list-group-item" id="provision-section">
                <h3>Provisioning</h3>
              </li>
              <li class="list-group-item">
                <table class="cost-table">
                  <tbody>
                    <tr>
                      <td class="cost-cell-img"><img id="tick-cost-money-img" class="slider-img" src="money.png" alt="money" title="Cost, in £ per second"></td>
                      <td class="cost-cell-text">£<span id="tick-cost-money">0</span> /s</td>
                    </tr>
                    <tr>
                      <td class="cost-cell-img cost-cell-bottom"><img id="tick-cost-power-img" class="slider-img" src="power.png" alt="power" title="Power, in W (1 W is 1 J per second)"></td>
                      <td class="cost-cell-text cost-cell-bottom"><span id="tick-cost-power">0</span> W</td>
                    </tr>
                  </tbody>
                </table>
              </li>
              <li class="list-group-item">
                <button id="failure-button" class="btn btn-lg btn-block btn-danger" title="Make a random amount of equipment fail!">Equipment Failure!</button>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="dialog-sequence" id="dialog-manual-mode" data-dialog-sequence-title="Welcome to the Cloud Simulator!">
      <div>
        <p><img class="img-centred" src="cloud.png" style="width: 40%;" alt="A cloud"></p>
        <p>Chances are, you use the Cloud all the time &ndash; every time you check Facebook, watch a video on YouTube, or store a file in Dropbox.</p>
        <p>But what is the Cloud, really, and how does it work?</p>
        <p>Click <strong>Next</strong> to learn about the Cloud, or <strong>Skip intro</strong> to go straight to the simulator.</p>
      </div>
      <div>
        <p>Websites like Facebook, YouTube, and Twitter are always on, accessible everywhere, and never fail. They are also super fast, even though they are some of the busiest websites in the world. <em>The Cloud</em> is what we call the technologies that make this possible.</p>
        <p>When you use these sites, you don&rsquo;t need to think about where they are in the world, or how they manage to handle so many users at once. They just work &ndash; it&rsquo;s like magic! That&rsquo;s what makes the Cloud so useful.</p>
        <p>But just like a magic trick, the Cloud is a clever illusion. Behind the scenes, there&rsquo;s a lot going on. Click <strong>Next</strong> to learn how the cloud works.</p>
      </div>
      <div>
        <p>
          <a href="http://www.google.com/about/datacenters/gallery/" class="thumbnail" target="_blank" style="width: 40%; margin: auto;" title="Click for more pictures of data centres">
            <img src="google-datacenter-tech-13.jpg" alt="A Google data center">
          </a>
        </p>
        <p>This is a picture of a data centre. It&rsquo;s a huge building full of computers called <em>servers</em>, because they serve up web pages. Think of a waiter or waitress in a restaurant &ndash; you tell them what you want, and they serve it to you! When you search on Google, your computer tells a particular server what you want to search for, and the server serves it.</p>
        <p>In the old days (the early 1990s), most websites would just have one server each. But if the website was really popular, even the best servers would become overloaded, and it would take a long time for pages to load &ndash; or the site might stop working altogether. Everything was slow in the 90s anyway, and this just made things worse!</p>
        <p>Click <strong>Next</strong> to find out how the Cloud solves this problem.</p>
      </div>
      <div>
        <p>Instead of just using one server, websites running in the Cloud can use as many servers as they need to stay fast &ndash; and they do it automatically. If more users access the site, a special program will give the site more servers to use. Using more servers is called <em>provisioning</em>.</p>
        <p>But running servers is expensive, so if users go away, the website will give the servers up again, and go back to using less.</p>
        <p>This happens all the time, without the users ever knowing &ndash; they just see that the site remains fast.</p>
        <p>Sometimes servers stop working. By using slightly more servers than it needs, a site can make sure it is still fast and accessible even if some of the servers fail. This is called <em>fault tolerance</em>.</p>
        <p>A busy popular website could be using thousands of servers in data centres all over the world, all at the same time!</p>
        <p>Click <strong>Next</strong> to learn about the resources websites need.</p>
      </div>
      <div>
        <p>Servers provide three essential resources:</p>
        <ul>
          <li><em>Computation</em> &ndash; processors to run programs</li>
          <li><em>Connectivity</em> &ndash; network connections between the servers</li>
          <li><em>Storage</em> &ndash; disks to store data on</li>
        </ul>
        <p>Each of these costs a different amount of money to run, and uses a different amount of energy.</p>
        <p>Different websites also have different needs. For example, a video site like YouTube needs a lot of connectivity to serve huge videos quickly. But something like Facebook, which is mainly text and images, doesn&rsquo;t need as much.</p>
        <p>So, managing the Cloud is a balancing act between giving websites the resources they need, without using too much money and energy.</p>
        <p>Click <strong>Next</strong> to learn how the Cloud Simulator lets you take control of this balancing act!</p>
      </div>
      <div>
        <p>The sliders on the left let you control how many people are using each of the sites.</p>
        <p>The sliders on the right let you control how much resources the Cloud allocates.</p>
        <p>Try adjusting them &ndash; and see how the packets moving across the network respond. If the load on the Cloud is high, it will take a long time to respond to the users. Increase the resources allocated, and things speed up again. Keep the <em>response time</em> low to keep the users happy!</p>
        <p>But you can keep an eye on the <em>total cost</em>, too. The more resources you allocate, the faster the cost goes up.</p>
      </div>
    </div>

    <div class="dialog-sequence" id="dialog-response-mode" data-dialog-sequence-title="Automatic provisioning">
      <div>
        <p>TODO</p>
      </div>
    </div>

    <div class="dialog-sequence" id="dialog-game-mode" data-dialog-sequence-title="A challenge!">
      <div>
        <p>TODO</p>
      </div>
    </div>

    <div class="modal fade" id="about-box" tabindex="-1" data-backdrop="static" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="myModalLabel">About the Cloud Simulator</h4>
          </div>
          <div class="modal-body">
            <p>Created by <a href="http://github.com/CallumCameron" target="_blank">Callum Cameron</a>, in collaboration with <a href="http://www.casscotland.org.uk/" target="_blank">Computing at School Scotland</a> and the <a href="http://www.dcs.gla.ac.uk/" target="_blank">School of Computing Science, University of Glasgow</a>.</p>
            <p>The Cloud Simulator is open-source software &ndash; you can find the source code <a href="http://github.com/CallumCameron/cloud-simulator" target="_blank">on GitHub</a>. Feel free to download and modify it. If you find a bug, or think something could be improved, please get in touch, or open an issue or a pull request!</p>
            <h4>Credits</h4>
            <p>TODO</p>
          </div>
          <div class="modal-footer">
            <button type="button" id="about-box-close" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="jquery.pause.min.js"></script>
    <script src="cloud.js"></script>
  </body>
</html>
