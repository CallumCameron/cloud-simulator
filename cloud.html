<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cloud Simulator</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="https://code.jquery.com/ui/1.11.3/themes/cupertino/jquery-ui.css">
    <link type="text/css" rel="stylesheet" href="cloud.css">

    <!--[if IE]><link rel="shortcut icon" href="favicon.ico"><![endif]-->
    <link rel="apple-touch-icon-precomposed" href="favicon-apple.png">
    <link rel="icon" href="favicon.png">
  </head>
  <body>
    <nav class="navbar navbar-default" style="border-radius: 0px;">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Cloud Simulator</a>
        </div>
        <div class="collapse navbar-collapse" id="navbar">
          <ul id="mode-selector" class="nav navbar-nav">
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a id="btn-replay-intro" href="#">Replay intro</a></li>
            <li><a id="btn-about" href="#">About</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container -->
    </nav>

    <div class="container">
      <div class="row">

        <div class="col-xs-4">

          <div class="panel panel-primary">
            <div class="panel-heading">
              <h2 class="panel-title panel-title-icon"><span class="glyphicon glyphicon-user" aria-hidden="true"></span></h2>
            </div>
            <ul class="list-group">
              <li class="list-group-item" id="response-section">
                <h3>Response time</h3>
              </li>
              <li class="list-group-item" id="demand-section">
                <h3>Demand</h3>
            </ul>
          </div>

        </div>

        <div class="col-xs-4">

          <div class="panel panel-primary">
            <div class="panel-heading">
              <h2 class="panel-title">Total cost</h2>
            </div>
            <ul class="list-group">
              <li class="list-group-item" id="total-cost-section">
                <table class="total-cost-table">
                  <tbody>
                    <tr>
                      <td class="total-cost-cell-img"><img id="total-cost-money-img" class="slider-img" src="money.png" alt="money" title="Total cost in £"></td>
                      <td class="total-cost-cell-text">£<span id="total-cost-money">0</span></td>
                      <td class="total-cost-cell-img"><img id="total-cost-energy-img" class="slider-img" src="power.png" alt="energy" title="Total energy usage in J"></td>
                      <td class="total-cost-cell-text"><span id="total-cost-energy">0</span> J</td>
                    </tr>
                    <tr id="cumulative-response-row">
                      <td class="total-cost-cell-bottom" colspan="2">Mean response time</td>
                      <td class="total-cost-cell-bottom" id="cumulative-response-load"></td>
                      <td class="total-cost-cell-bottom" id="cumulative-response-text" style="font-size: 1em"></td>
                    </tr>
                  </tbody>
                </table>
                <button id="reset-cost-button" class="btn btn-block btn-default">Reset</button>
              </li>
            </ul>
          </div>

          <div class="network-main">
          </div>

        </div>

        <div class="col-xs-4">

          <div class="panel panel-primary" id="cloud-panel">
            <div class="panel-heading">
              <h2 class="panel-title panel-title-icon"><span class="glyphicon glyphicon-cloud" aria-hidden="true"></span></h2>
            </div>
            <ul class="list-group">
              <li class="list-group-item" id="load-section">
                <h3>Load</h3>
              </li>
              <li class="list-group-item" id="provision-section">
                <h3>Provisioning</h3>
              </li>
              <li class="list-group-item">
                <table class="cost-table">
                  <tbody>
                    <tr>
                      <td class="cost-cell-img"><img id="tick-cost-money-img" class="slider-img" src="money.png" alt="money" title="Cost, in £ per second"></td>
                      <td class="cost-cell-text">£<span id="tick-cost-money">0</span> /s</td>
                    </tr>
                    <tr>
                      <td class="cost-cell-img cost-cell-bottom"><img id="tick-cost-power-img" class="slider-img" src="power.png" alt="power" title="Power, in W (1 W is 1 J per second)"></td>
                      <td class="cost-cell-text cost-cell-bottom"><span id="tick-cost-power">0</span> W</td>
                    </tr>
                  </tbody>
                </table>
              </li>
              <li class="list-group-item">
                <button id="failure-button" class="btn btn-lg btn-block btn-default">Make servers crash!</button>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="dialog-sequence" id="dialog-manual-mode" data-dialog-sequence-title="Cloud Simulator">
      <div>
        <p class="text-center"><img src="cloud.png" style="width: 20%;" alt="A cloud"></p>
        <h2 class="text-center" style="margin-bottom: 30px;">Welcome to the Cloud Simulator!</h2>
        <p>Chances are, you use the Cloud every day &ndash; every time you check Facebook, watch a video on YouTube, or store a file in Dropbox.</p>
        <p>But what is the Cloud, really, and how does it work?</p>
        <p>Click <strong>Next</strong> to learn about the Cloud, or <strong>Skip intro</strong> to go straight to the simulator.</p>
      </div>
      <div>
        <p class="text-center">
          <img class="intro-icon" src="google.png" alt="Google icon" title="Google icon">
          <img class="intro-icon" src="facebook.png" alt="Facebook icon" title="Facebook icon">
          <img class="intro-icon" src="yt.png" alt="YouTube icon" title="YouTube icon">
        </p>
        <p>Websites like Google, Facebook, and YouTube are always on, accessible everywhere, and almost never fail. They are also super-fast, even though they are some of the busiest sites in the world. <em>The Cloud</em> is the technology that makes this possible.</p>
        <p>When you use these sites, you don&rsquo;t need to think about where they are in the world, or how they manage to handle so many users at once. They just work! That&rsquo;s what makes the Cloud so useful.</p>
        <p>But the Cloud is a clever illusion. Behind the scenes, there&rsquo;s a lot going on. Click <strong>Next</strong> to start learning how the cloud works.</p>
      </div>
      <div>
        <p>
          <a href="http://www.google.com/about/datacenters/gallery/" class="thumbnail" target="_blank" style="width: 40%; margin: auto;" title="Click for more pictures of data centres">
            <img src="google-datacenter-tech-13.jpg" alt="A Google data center">
          </a>
        </p>
        <p>This photo shows the inside of a <em>data centre</em> (this one belongs to Google). It&rsquo;s a huge building full of computers called <em>servers</em>, because they serve up web pages that you ask for. Think of a waiter or waitress in a restaurant &ndash; you tell them what you want, and they serve it to you! When you search on Google, your computer tells a server what you want, and the server finds it, and serves it to you.</p>
        <p>In the old days (the early 1990s), most websites would just have one server each. But if the website was really popular, even the best servers would become overloaded, and it would take a long time for pages to load &ndash; or the site might stop working altogether. Everything was slow in the 90s anyway, and this just made things worse!</p>
        <p>Click <strong>Next</strong> to find out how the Cloud solves this problem.</p>
      </div>
      <div>
        <p>Instead of using one server, websites running in the Cloud can use as many servers as they need to stay fast &ndash; and they do it automatically. If more users access the site, a special program running in the data centre will give the site more servers to use. Using more servers is called <em>provisioning</em>.</p>
        <p>But running servers is expensive &ndash; both in terms of money and power &ndash; so if users go away, the website will give the servers up again, and go back to using less. This happens all the time, without the users ever knowing. They just see that the site remains fast.</p>
        <p class="text-center">
          <img class="intro-icon" src="money.png" alt="Money icon" title="Money">
          <img class="intro-icon" src="power.png" alt="Power icon" title="Power">
        </p>
        <p>Sometimes servers stop working. By using slightly more servers than it needs, a site can make sure it is still fast and accessible even if some of the servers fail. This is called <em>fault tolerance</em>.</p>
        <p>A busy popular website could be using thousands of servers in data centres all over the world, all at the same time!</p>
        <p>Click <strong>Next</strong> to learn about the resources websites need.</p>
      </div>
      <div>
        <p>The Cloud provides three essential resources:</p>
        <p><img class="intro-icon" src="processor.png" alt="Computation icon" title="Computation"><em>Computation</em> &ndash; processors to run programs.</p>
        <p><img class="intro-icon" src="network.png" alt="Connectivity icon" title="Connectivity"><em>Connectivity</em> &ndash; network connections between servers.</p>
        <p><img class="intro-icon" src="harddrive.png" alt="Storage icon" title="Storage"><em>Storage</em> &ndash; hard disks and SSDs to store data on.</p>
        <p>Each has a different cost, and uses a different amount of energy. Different websites also have different needs. For example, a video site like YouTube needs a lot of connectivity to serve huge videos quickly. But something like Facebook, which is mainly text and images, doesn&rsquo;t need as much.</p>
        <p>So, managing the Cloud is a balancing act between giving websites the resources they need, and not using too much money and energy.</p>
        <p>Click <strong>Next</strong> to see how the Cloud Simulator lets you take control of this balancing act!</p>
      </div>
      <div>
        <p>After you click <strong>Finish</strong>, you will see two sets of sliders.</p>
        <p>The sliders on the left let you control how many people are using each of the sites. The <em>response time</em> is how long it takes for the site to respond when you click on something &ndash; lower is better! Keep the box green to keep your users happy.</p>
        <p class="text-center">
          <img class="intro-icon" src="response-time.png" alt="Response time">
        </p>
        <p>The sliders on the right let you control how many resources the Cloud allocates. The load boxes show how hard the servers in the Cloud are working &ndash; if they are red, then things will be slow and the users will get annoyed!</p>
        <p class="text-center">
          <img class="intro-icon" src="load.png" alt="Load">
        </p>
        <p>Try adjusting both sets of sliders and see how the packets moving across the network respond. If the load on the Cloud is high, it will take a long time to respond to the users. Increase the resources allocated, and things speed up again. But keep an eye on the <em>total cost</em>, too. The more resources you allocate, the faster the cost goes up.</p>
        <p>Click <strong>Finish</strong> to go to the Cloud Simulator.</p>
      </div>
    </div>

    <div class="dialog-sequence" id="dialog-response-mode" data-dialog-sequence-title="Automatic provisioning">
      <div>
        <p>In this mode, you can set the number of people using each website by moving the sliders on the left, and watch how the Cloud responds.</p>
        <p class="text-center">
          <img src="response-mode.png" alt="Automatic provisioning">
        </p>
        <p>Like in real life, the Cloud tries to provision just enough resources to keep the websites running fast, without wasting money or energy. But sometimes equipment fails &ndash; and it must be replaced quickly before the users notice!</p>
      </div>
    </div>

    <div class="dialog-sequence" id="dialog-game-mode" data-dialog-sequence-title="Keeping the users happy">
      <div>
        <p>In this mode, you are in control of the provisioning sliders on the right. Your job is to do what the software managing the Cloud does in real life &ndash; to keep the users happy without spending too much money or using too much energy.</p>
        <p class="text-center">
          <img src="totals.png" alt="Balancing costs">
        </p>
        <p>When you click <strong>Go!</strong>, the number of people using each website will change over time. Try to keep the mean response time low to keep them happy. But try to keep the total cost and energy usage low, too, by using only the resources you need. You will see how you did when the timer runs out!</p>
      </div>
    </div>

    <div class="modal fade" id="about-box" tabindex="-1" data-backdrop="static" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="myModalLabel">About the Cloud Simulator</h4>
          </div>
          <div class="modal-body">
            <p class="text-center">
              <a href="http://www.cas.scot/" target="_blank">
                <img class="intro-icon" src="cas.png" alt="Computing At School Scotland" title="Computing At School Scotland">
              </a>
              <a href="http://www.gla.ac.uk/schools/computing/" target="_blank">
                <img class="intro-icon" src="compsci.png" alt="School of Computing Science, University of Glasgow" title="School of Computing Science, University of Glasgow">
              </a>
            </p>
            <p>Created by <a href="http://github.com/CallumCameron" target="_blank">Callum Cameron</a>, for <a href="http://www.cas.scot/" target="_blank">Computing At School Scotland</a> and the <a href="http://www.gla.ac.uk/schools/computing/" target="_blank">School of Computing Science, University of Glasgow</a>.</p>
            <p>The Cloud Simulator is open-source software. This means you are free to download the code, see how it works, modify it, and share it. You can download the code <a href="http://github.com/CallumCameron/cloud-simulator" target="_blank">on GitHub</a>. If you find a bug, or think something could be improved, please get in touch, or open an issue or a pull request!</p>
            <strong>Image Credits</strong>
            <ul>
              <li>The Google, Facebook, Dropbox, and YouTube logos belong to their respective companies.</li>
              <li>The data centre photo is from the <a href="http://www.google.com/about/datacenters/gallery/" target="_blank">Google Data Centres gallery</a>.</li>
              <li><a href="http://www.iconarchive.com/show/pretty-office-12-icons-by-custom-icon-design/cloud-icon.html" target="_blank">Cloud icon</a> by <a href="http://www.iconarchive.com/artist/custom-icon-design.html" target="_blank">Custom Icon Design</a>, free for non-commercial use.</li>
              <li><a href="http://www.iconarchive.com/show/weather-icons-by-custom-icon-design/lightning-icon.html" target="_blank">Lightning icon</a> by <a href="http://www.iconarchive.com/artist/custom-icon-design.html" target="_blank">Custom Icon Design</a>, free for non-commercial use.</li>
              <li><a href="http://www.iconarchive.com/show/cashino-icons-by-robinweatherall/Coin-icon.html" target="_blank">Coin icon</a> by <a href="http://robinweatherall.co.uk/" target="_blank">Robin Weatherall</a>.</li>
              <li><a href="http://www.softicons.com/system-icons/crystal-project-icons-by-everaldo-coelho/apps-hard-drive-icon" target="_blank">Hard drive icon</a> by <a href="http://www.softicons.com/designers/everaldo-coelho" target="_blank">Everaldo Coelho</a>, LGPL license.</li>
              <li><a href="http://www.softicons.com/toolbar-icons/free-android-icons-by-mobileiconsets.com/networking-icon" target="_blank">Network icon</a> by <a href="http://www.softicons.com/designers/mobileiconsets.com" target="_blank">mobileiconsets.com</a>.</li>
              <li><a href="http://www.softicons.com/system-icons/web0.2ama-icons-by-chrfb/processor-icon" target="_blank">Processor icon</a> by <a href="http://www.softicons.com/designers/chrfb" target="_blank">chrfb</a>, CC BY-NC-SA license.</li>
            </ul>
          </div>
          <div class="modal-footer">
            <button type="button" id="about-box-close" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="score-box" tabindex="-1" data-backdrop="static" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="myModalLabel">Time Up!</h4>
          </div>
          <div class="modal-body">
            <p>Your score (lower is better):</p>
            <p>
              <span class="fake-load-box-colour" id="score-money-colour"></span>
              <img class="intro-icon" src="money.png" alt="Money icon" title="Money">
              You spent <strong>£<span id="score-money"></span></strong>.
            </p>
            <p>
              <span class="fake-load-box-colour" id="score-energy-colour"></span>
              <img class="intro-icon" src="power.png" alt="Energy icon" title="Energy">
              You used <strong><span id="score-energy"></span> J</strong> of energy.
            </p>
            <p>
              <span class="fake-load-box-colour" id="score-response-colour"></span>
              Your mean response time was <strong><span id="score-response"></span> ms</strong>.
            </p>
          </div>
          <div class="modal-footer">
            <button type="button" id="score-box-close" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="jquery.pause.min.js"></script>
    <script src="cloud.js"></script>
  </body>
</html>
